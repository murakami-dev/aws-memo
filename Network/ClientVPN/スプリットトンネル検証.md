
ここに答えがあった
https://dev.classmethod.jp/articles/aws-client-vpn-split-tunnel-internet/

## スプリットトンネル有効にしてclientVPNのルートテーブルに`0.0.0/0`を書いたらインターネットにはどう出るのか
- クライアントCIDRは`172.30.0.0/18`
- clentvpn接続前にIP`14.10.xx.xx`
```
C:\Users\user>route print
===========================================================================
インターフェイス一覧
 12...........................Wintun Userspace Tunnel
  3...0a 00 27 00 00 03 ......VirtualBox Host-Only Ethernet Adapter
  6...00 ff 57 13 42 f6 ......TAP-Windows Adapter V9
 21...28 7f cf 83 14 55 ......Microsoft Wi-Fi Direct Virtual Adapter
 10...2a 7f cf 83 14 54 ......Microsoft Wi-Fi Direct Virtual Adapter #2
 15...28 7f cf 83 14 54 ......Intel(R) Wireless-AC 9560 160MHz
 17...28 7f cf 83 14 58 ......Bluetooth Device (Personal Area Network)
  1...........................Software Loopback Interface 1
===========================================================================

IPv4 ルート テーブル
===========================================================================
アクティブ ルート:
ネットワーク宛先        ネットマスク          ゲートウェイ       インターフェイス  メトリック
          0.0.0.0          0.0.0.0     192.168.11.1     192.168.11.9     35
   18.180.170.121  255.255.255.255    192.168.100.1     192.168.11.9     35
   18.180.211.183  255.255.255.255     192.168.11.1     192.168.11.9     35
        127.0.0.0        255.0.0.0            リンク上         127.0.0.1    331
        127.0.0.1  255.255.255.255            リンク上         127.0.0.1    331
  127.255.255.255  255.255.255.255            リンク上         127.0.0.1    331
     192.168.11.0    255.255.255.0            リンク上      192.168.11.9    291
     192.168.11.9  255.255.255.255            リンク上      192.168.11.9    291
   192.168.11.255  255.255.255.255            リンク上      192.168.11.9    291
     192.168.56.0    255.255.255.0            リンク上      192.168.56.1    281
     192.168.56.1  255.255.255.255            リンク上      192.168.56.1    281
   192.168.56.255  255.255.255.255            リンク上      192.168.56.1    281
        224.0.0.0        240.0.0.0            リンク上         127.0.0.1    331
        224.0.0.0        240.0.0.0            リンク上      192.168.56.1    281
        224.0.0.0        240.0.0.0            リンク上      192.168.11.9    291
  255.255.255.255  255.255.255.255            リンク上         127.0.0.1    331
  255.255.255.255  255.255.255.255            リンク上      192.168.56.1    281
  255.255.255.255  255.255.255.255            リンク上      192.168.11.9    291
===========================================================================
固定ルート:
  なし

IPv6 ルート テーブル
===========================================================================
アクティブ ルート:
 If メトリック ネットワーク宛先      ゲートウェイ
 15    291 ::/0                     fe80::1aec:e7ff:fe12:8690
  1    331 ::1/128                  リンク上
 15    291 240b:250:4160:a000::/64  リンク上
 15    291 240b:250:4160:a000:5923:87f8:205b:d8b4/128
                                    リンク上
 15    291 240b:250:4160:a000:f95d:8b13:a90:168/128
                                    リンク上
  3    281 fe80::/64                リンク上
 15    291 fe80::/64                リンク上
  3    281 fe80::185:bc80:dd77:1f66/128
                                    リンク上
 15    291 fe80::f95d:8b13:a90:168/128
                                    リンク上
  1    331 ff00::/8                 リンク上
  3    281 ff00::/8                 リンク上
 15    291 ff00::/8                 リンク上
===========================================================================
固定ルート:
  なし
```

### まずはclientvpnルートテーブルに`10.123.0.0/16`だけの状態でインターネットに出る
- clientvpn接続してもスプリットされて`14.10.xx.xx`のまま（当然）

```
C:\Users\user>route print
===========================================================================
インターフェイス一覧
 12...........................Wintun Userspace Tunnel
  3...0a 00 27 00 00 03 ......VirtualBox Host-Only Ethernet Adapter
  6...00 ff 57 13 42 f6 ......TAP-Windows Adapter V9
 21...28 7f cf 83 14 55 ......Microsoft Wi-Fi Direct Virtual Adapter
 10...2a 7f cf 83 14 54 ......Microsoft Wi-Fi Direct Virtual Adapter #2
 15...28 7f cf 83 14 54 ......Intel(R) Wireless-AC 9560 160MHz
 17...28 7f cf 83 14 58 ......Bluetooth Device (Personal Area Network)
  1...........................Software Loopback Interface 1
===========================================================================

IPv4 ルート テーブル
===========================================================================
アクティブ ルート:
ネットワーク宛先        ネットマスク          ゲートウェイ       インターフェイス  メトリック
          0.0.0.0          0.0.0.0     192.168.11.1     192.168.11.9     35
          0.0.0.0        128.0.0.0      172.30.0.33       172.30.0.2     25
          0.0.0.0        128.0.0.0     172.30.0.129       172.30.0.2     25
       10.123.0.0      255.255.0.0       172.30.0.1       172.30.0.2     25                  ###コレ
   18.180.170.121  255.255.255.255    192.168.100.1     192.168.11.9     35
   18.180.211.183  255.255.255.255     192.168.11.1     192.168.11.9     35
        127.0.0.0        255.0.0.0            リンク上         127.0.0.1    331
        127.0.0.1  255.255.255.255            リンク上         127.0.0.1    331
  127.255.255.255  255.255.255.255            リンク上         127.0.0.1    331
        128.0.0.0        128.0.0.0      172.30.0.33       172.30.0.2     25
        128.0.0.0        128.0.0.0     172.30.0.129       172.30.0.2     25
       172.30.0.0  255.255.255.224            リンク上        172.30.0.2    281
       172.30.0.2  255.255.255.255            リンク上        172.30.0.2    281
      172.30.0.31  255.255.255.255            リンク上        172.30.0.2    281
     192.168.11.0    255.255.255.0            リンク上      192.168.11.9    291
     192.168.11.9  255.255.255.255            リンク上      192.168.11.9    291
   192.168.11.255  255.255.255.255            リンク上      192.168.11.9    291
     192.168.56.0    255.255.255.0            リンク上      192.168.56.1    281
     192.168.56.1  255.255.255.255            リンク上      192.168.56.1    281
   192.168.56.255  255.255.255.255            リンク上      192.168.56.1    281
        224.0.0.0        240.0.0.0            リンク上         127.0.0.1    331
        224.0.0.0        240.0.0.0            リンク上      192.168.56.1    281
        224.0.0.0        240.0.0.0            リンク上        172.30.0.2    281
        224.0.0.0        240.0.0.0            リンク上      192.168.11.9    291
  255.255.255.255  255.255.255.255            リンク上         127.0.0.1    331
  255.255.255.255  255.255.255.255            リンク上      192.168.56.1    281
  255.255.255.255  255.255.255.255            リンク上        172.30.0.2    281
  255.255.255.255  255.255.255.255            リンク上      192.168.11.9    291
===========================================================================
固定ルート:
  なし

IPv6 ルート テーブル
===========================================================================
アクティブ ルート:
 If メトリック ネットワーク宛先      ゲートウェイ
 15    291 ::/0                     fe80::1aec:e7ff:fe12:8690
  1    331 ::1/128                  リンク上
 15    291 240b:250:4160:a000::/64  リンク上
 15    291 240b:250:4160:a000:5923:87f8:205b:d8b4/128
                                    リンク上
 15    291 240b:250:4160:a000:f95d:8b13:a90:168/128
                                    リンク上
  3    281 fe80::/64                リンク上
  6    281 fe80::/64                リンク上
 15    291 fe80::/64                リンク上
  6    281 fe80::118:f6fe:e10b:6071/128
                                    リンク上
  3    281 fe80::185:bc80:dd77:1f66/128
                                    リンク上
 15    291 fe80::f95d:8b13:a90:168/128
                                    リンク上
  1    331 ff00::/8                 リンク上
  3    281 ff00::/8                 リンク上
  6    281 ff00::/8                 リンク上
 15    291 ff00::/8                 リンク上
===========================================================================
固定ルート:
  なし
```

### clientvpnのルートテーブルに`0.0.0.0/0`を書く
