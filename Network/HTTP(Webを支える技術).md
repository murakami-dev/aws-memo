# 目的
- 本のメモ

# HTTPはステートレス
- HTTPはステートレスなプロトコルとして設計されています。ステートレスとは「サーバがクライアントの**アプリケーション状態を保存しない**」制約のことです。
- アプリケーション状態は別名「セッション状態」（SessionState）とも言います。システムにログインしてからログアウトするまでの一連の操作をまとめて「セッション」と呼ぶのですが、この一連の操作の間の状態はアプリケーション状態のことですので、アプリケーション状態とセッション状態はほぼ同じ意味になります。

# HTTPメソッド
- ![image](https://user-images.githubusercontent.com/60077121/110239958-f9eadd80-7f8c-11eb-9ae8-b4607651886c.png)

## POSTとPUT
- POSTでリソースを作成する場合、クライアントはリソースのURIを指定できません。URIの決定権はサーバ側にあります。逆にPUTでリソースを作成する場合、リソースのURIはクライアントが決定します。たとえばTwitterのようにつぶやきのURIをサーバ側で自動的に決定するWebサービスの場合は、POSTを用いるのが一般的です。逆に、Wikiのようにクライアントが決めたタイトルがそのままURIになるWebサービスの場合は、PUTを使うほうが適しているでしょう。た

## べき等性と安全性
- べき等とは「ある操作を何回行っても結果が同じこと」を意味する数学用語です。
- 安全とは「操作対象のリソースの状態を変化させないこと」
- ![image](https://user-images.githubusercontent.com/60077121/110240074-82697e00-7f8d-11eb-963e-deedf8e8c204.png)

# ステータスコード
- 401Unauthorizedは、適切な認証情報を与えずにリクエストを行ったことを示します。レスポンスのWWWAuthenticateヘッダで、クライアントに対して認証方式を伝えます
- 500InternalServerErrorは、サーバ側に何らかの異常が生じていて、正しいレスポンスが返せないことを示します。
- 503ServiceUnavailableは、サーバがメンテナンスなどで一時的にアクセスできないことを示します。レスポンスボディにはその理由が入ります。レスポンスのRetryAfterヘッダでサービス再開時期がおよそ何秒後であるかを通知することもできます。


# HTTPヘッダ
## ContentType──メディアタイプを指定する
```
ContentType:application/xhtml+xml;charset=utf8
```
- application/xhtml+xmlがメディアタイプです。「/」の左側を「タイプ」（Type）と呼び、右側を「サブタイプ」とよぶ
- ![image](https://user-images.githubusercontent.com/60077121/110240313-a9747f80-7f8e-11eb-80de-4bd7bdda2662.png)

## Accept──処理できるメディアタイプを伝える
```
Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
```
- text/html、application/xhtml+xmlがデフォルトの1、application/xmlが0.9、それ以外のすべてのメディアタイプ（*/*）が0.8という優先度です。

# 認証
## Basic認証
```
DELETE/testHTTP/1.1
Host:example.jpAuthorization:BasicdXNlcjpwYXNzd29yZA==
```
- Authorizationヘッダの内容は、認証方式（Basic）に続けて、ユーザ名とパスワードを「:」で連結しBase64エンコードした文字列になります。
- Base64は簡単にデコードできる
- 使用する場合はそれで良いのか、SSL使うのか

## Digest認証
- Digest認証は、Basic認証よりもセキュアな認証方式です。
- Digest認証のダイジェストとはメッセージダイジェストの略で、あるメッセージに対してハッシュ関数を適用した結果のハッシュ値のことです。
- ハッシュ化にはMD5を使う
- >Digest認証ではパスワードを盗まれる危険性はありません。またDigest認証ではサーバ上にパスワードのハッシュ値を保管しておけばよいので、パスワードそのものをサーバに預けなくてもよくなります。これはセキュリティリスクを下げる大きな優位点です。

### Digest認証はあまり普及していない
- >Basic認証の場合は、同じURI空間のリソースであれば、クライアントは一度認証してしまえば2回目以降は自動的にユーザ名とパスワードを送れました。しかしDigest認証の場合はサーバからのnonceがなければクライアント側でダイジェストを計算できませんから、リクエストのたびに一度401Unauthorizedレスポンスを得なければなりません。

# 持続的接続
- Keep-aliveヘッダで指定する
- クライアント・サーバ間でTCPコネクションの確立を省略できる
